#!/usr/bin/env node

var Elm = require("../dist/elm.js").Elm;

var data = "";

process.stdin.on("data", function (chunk) {
  data += chunk;
});

process.stdin.on("end", function () {
    var program = Elm.Generate.init({flags: data});

    program.ports.printAndExitFailure.subscribe(message => {
        console.log(message);
        process.exit(1);
    });
    program.ports.printAndExitSuccess.subscribe(message => {
        console.log(message);
        process.exit(0);
    });
});


